{"version":3,"sources":["../src/utils.ts","../src/minigl.ts","../src/shaders.ts","../src/constants.ts","../src/gradient.ts"],"names":["normalizeColor","hexCode","red","green","blue","acc","modeName","index","setProperty","object","propertyName","val","parseHexColor","hexValue","trimmed","expanded","c","parsed","genRandomColors","colors","i","r","g","b","hexColor","MiniGl","canvas","width","height","debug","__publicField","_miniGl","isDebugEnabled","gl","context","args","message","currentTime","timestamp","padding","vertexShaders","fragments","uniforms","getShaderByType","type","source","shader","getUniformVariableDeclarations","uniform","value","prefix","program","name","material","n","u","k","v","config","location","fn","length","name_no_prefix","members","memberName","memberUniform","lenSuffix","orientation","e","t","nthis","yy","xx","s","geometry","o","segment_width","segment_height","yIndex","ty","xIndex","rx","l","mesh","attribute","attr","item","m","identityMatrix","x","y","z","near","far","SHADERS","DEFAULT_TIME_VALUE","MAX_FRAME_DELTA","DEFAULT_ANIMATION_SPEED","LOADED_CLASS_DELAY","RESIZE_THROTTLE_DELAY","DEFAULT_DENSITY","DEFAULT_ZOOM","DEFAULT_ROTATION","DEFAULT_PRESET_NAME","DEFAULT_WIREFRAME","DEFAULT_PAUSE_OBSERVER_OPTIONS","DEFAULT_ACTIVE_TOGGLE_COLORS","DEFAULT_APPEARANCE_MODE","DEFAULT_APPEARANCE_DURATION","DEFAULT_TRANSITION_DURATION","DEFAULT_AMP","DEFAULT_SEED","DEFAULT_FREQ_X","DEFAULT_FREQ_Y","DEFAULT_FREQ_DELTA","SMALL_SCREEN_SHADOW_POWER","LARGE_SCREEN_SHADOW_POWER","SMALL_SCREEN_WIDTH_THRESHOLD","DEFAULT_FALLBACK_COLORS","CSS_GRADIENT_VARS","DEFAULT_ACTIVE_COLORS","MeshGradient","duration","originalCanvas","speed","enabled","ctx","defaultProperties","selector","options","activeColors","rect","entries","entry","isIntersecting","minigl","_e","resolve","reject","startTime","checkCssVars","elapsed","interval","color","colorValue","cssVars","cssPropertyName","randomColors"],"mappings":"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","file":"index.js","sourcesContent":["import type { MeshGradientColorsConfig, Vec3 } from './types';\n\n/**\n * Converts HEX color to normalized RGB array (0-1)\n * @param hexCode - HEX color code\n * @returns RGB array [r, g, b] in range 0-1\n */\nexport function normalizeColor(hexCode: number): Vec3 {\n  const red = ((hexCode >> 16) & 255) / 255;\n  const green = ((hexCode >> 8) & 255) / 255;\n  const blue = (255 & hexCode) / 255;\n\n  return [red, green, blue];\n}\n\n/**\n * Blend modes for WebGL\n */\nexport const BlendModes: Record<string, number> = ['SCREEN', 'LINEAR_LIGHT'].reduce<Record<string, number>>(\n  (acc, modeName, index) => Object.assign(acc, { [modeName]: index }),\n  {},\n);\n\n/**\n * Helper function to assign properties dynamically\n * Used for setting up gradient properties\n */\nexport function setProperty<T extends object, K extends PropertyKey>(object: T, propertyName: K, val: any): T & Record<K, any> {\n  if (propertyName in object) {\n    Object.defineProperty(object, propertyName, {\n      value: val,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    });\n  } else {\n    // @ts-ignore\n    object[propertyName] = val;\n  }\n\n  // @ts-ignore\n  return object as T & Record<K, any>;\n}\n\n/**\n * Creates a default gradient configuration\n */\nexport function createDefaultConfig(): {\n  presetName: string;\n  wireframe: boolean;\n  density: [number, number];\n  zoom: number;\n  rotation: number;\n  playing: boolean;\n} {\n  return {\n    presetName: '',\n    wireframe: false,\n    density: [0.06, 0.16],\n    zoom: 1,\n    rotation: 0,\n    playing: true,\n  };\n}\n\n/**\n * Parses hex color string and handles different formats\n * @param hexValue - hex color value from CSS\n * @returns parsed integer or null if invalid\n */\nexport function parseHexColor(hexValue: string): number | null {\n  const trimmed = hexValue.trim();\n\n  // Handle short hex format (#RGB -> #RRGGBB)\n  if (trimmed.length === 4) {\n    const expanded = trimmed\n      .substr(1)\n      .split('')\n      .map((c) => c + c)\n      .join('');\n\n    return parseInt(expanded, 16);\n  }\n\n  // Handle standard hex format\n  if (trimmed && trimmed.startsWith('#')) {\n    const parsed = parseInt(trimmed.substr(1), 16);\n\n    return isNaN(parsed) ? null : parsed;\n  }\n\n  return null;\n}\n\n/**\n * Generates random colors in hex format\n * @returns array of 4 random colors\n */\nexport const genRandomColors = (): MeshGradientColorsConfig => {\n  const colors = [];\n\n  for (let i = 0; i < 4; i++) {\n    const r = Math.floor(Math.random() * 256);\n    const g = Math.floor(Math.random() * 256);\n    const b = Math.floor(Math.random() * 256);\n\n    // Конвертируем в hex формат\n    const hexColor = `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n\n    colors.push(hexColor);\n  }\n\n  return colors as MeshGradientColorsConfig;\n};\n","import type {\n  MiniGlUniform,\n  MiniGlAttribute,\n  MiniGlPlaneGeometry,\n  MiniGlMaterial,\n  MiniGlMesh,\n  MiniGlUniformConstructor,\n  MiniGlAttributeConstructor,\n  MiniGlPlaneGeometryConstructor,\n  MiniGlMaterialConstructor,\n  MiniGlMeshConstructor,\n  UniformConfig,\n  AttributeConfig,\n} from './types';\n\n/**\n * Essential WebGL functionality wrapper\n * Provides simplified interface for creating and managing WebGL meshes\n */\nexport class MiniGl {\n  canvas: HTMLCanvasElement;\n  gl: WebGLRenderingContext;\n  meshes: MiniGlMesh[];\n  lastDebugMsg?: Date;\n  debug: (...args: string[]) => void;\n  commonUniforms!: Record<string, MiniGlUniform>;\n\n  // Constructors for inner classes\n  Uniform!: MiniGlUniformConstructor;\n  Attribute!: MiniGlAttributeConstructor;\n  PlaneGeometry!: MiniGlPlaneGeometryConstructor;\n  Material!: MiniGlMaterialConstructor;\n  Mesh!: MiniGlMeshConstructor;\n\n  /**\n   * Creates new MiniGL instance\n   * @param canvas - HTML Canvas element\n   * @param width - Canvas width\n   * @param height - Canvas height\n   * @param debug - Enable debug mode\n   */\n  constructor(canvas: HTMLCanvasElement, width?: number | null, height?: number | null, debug: boolean = false) {\n    const _miniGl = this;\n    const isDebugEnabled = document.location.search.toLowerCase().indexOf('debug=webgl') !== -1;\n\n    this.canvas = canvas;\n    const gl = canvas.getContext('webgl', { antialias: true });\n\n    if (!gl) throw new Error('WebGL not supported');\n    this.gl = gl;\n    this.meshes = [];\n\n    const context = this.gl;\n\n    if (width && height) {\n      this.setSize(width, height);\n    }\n\n    this.lastDebugMsg = undefined;\n    // Setup debug function\n    this.debug =\n      debug && isDebugEnabled\n        ? function (...args: string[]) {\n            const message = args[0] || '';\n            const currentTime = new Date();\n\n            // Add separator if more than a second has passed\n            if (!_miniGl.lastDebugMsg || currentTime.getTime() - _miniGl.lastDebugMsg.getTime() > 1000) {\n              // eslint-disable-next-line no-console\n              console.log('---');\n            }\n\n            // Format message with alignment\n            const timestamp = currentTime.toLocaleTimeString();\n            const padding = Array(Math.max(0, 32 - message.length)).join(' ');\n\n            // eslint-disable-next-line no-console\n            console.log(timestamp + padding + message + ': ', ...args.slice(1));\n\n            _miniGl.lastDebugMsg = currentTime;\n          }\n        : () => {};\n\n    Object.defineProperties(_miniGl, {\n      Material: {\n        enumerable: false,\n        value: class implements MiniGlMaterial {\n          vertexSource: string;\n          Source: string;\n          vertexShader!: WebGLShader;\n          fragmentShader!: WebGLShader;\n          program!: WebGLProgram;\n          uniforms: Record<string, MiniGlUniform>;\n          uniformInstances: Array<{\n            uniform: MiniGlUniform;\n            location: WebGLUniformLocation | null;\n          }>;\n\n          constructor(vertexShaders: string, fragments: string, uniforms: Record<string, MiniGlUniform> = {}) {\n            function getShaderByType(type: number, source: string): WebGLShader {\n              const shader = context.createShader(type);\n\n              if (!shader) throw new Error('Cannot create shader');\n              context.shaderSource(shader, source);\n              context.compileShader(shader);\n              if (!context.getShaderParameter(shader, context.COMPILE_STATUS)) {\n                // eslint-disable-next-line no-console\n                console.error(context.getShaderInfoLog(shader));\n              }\n              _miniGl.debug('Material.compileShaderSource', source);\n\n              return shader;\n            }\n\n            function getUniformVariableDeclarations(uniforms: Record<string, MiniGlUniform>, type: 'vertex' | 'fragment') {\n              return Object.entries(uniforms)\n                .map(([uniform, value]) => value.getDeclaration(uniform, type))\n                .join('\\n');\n            }\n\n            this.uniforms = uniforms;\n            this.uniformInstances = [];\n\n            const prefix = `\n              precision highp float;\n            `;\n\n            this.vertexSource = `${prefix}\n              attribute vec4 position;\n              attribute vec2 uv;\n              attribute vec2 uvNorm;\n              ${getUniformVariableDeclarations(_miniGl.commonUniforms, 'vertex')}\n              ${getUniformVariableDeclarations(uniforms, 'vertex')}\n              ${vertexShaders}\n            `;\n\n            this.Source = `${prefix}\n              ${getUniformVariableDeclarations(_miniGl.commonUniforms, 'fragment')}\n              ${getUniformVariableDeclarations(uniforms, 'fragment')}\n              ${fragments}\n            `;\n\n            this.vertexShader = getShaderByType(context.VERTEX_SHADER, this.vertexSource);\n            this.fragmentShader = getShaderByType(context.FRAGMENT_SHADER, this.Source);\n\n            const program = context.createProgram();\n\n            if (!program) throw new Error('Cannot create program');\n            this.program = program;\n            context.attachShader(this.program, this.vertexShader);\n            context.attachShader(this.program, this.fragmentShader);\n            context.linkProgram(this.program);\n            if (!context.getProgramParameter(this.program, context.LINK_STATUS)) {\n              // eslint-disable-next-line no-console\n              console.error(context.getProgramInfoLog(this.program));\n            }\n            context.useProgram(this.program);\n\n            this.attachUniforms(undefined, _miniGl.commonUniforms);\n            this.attachUniforms(undefined, this.uniforms);\n          }\n\n          attachUniforms(name: string | undefined, uniforms: MiniGlUniform | Record<string, MiniGlUniform>) {\n            const material = this;\n\n            if (typeof name === 'undefined') {\n              if (uniforms && typeof uniforms === 'object' && !('type' in uniforms)) {\n                Object.entries(uniforms as Record<string, MiniGlUniform>).forEach(([n, uniform]) => {\n                  material.attachUniforms(n, uniform);\n                });\n\n                return;\n              }\n            }\n\n            const uniform = uniforms as MiniGlUniform;\n\n            if (uniform.type === 'array') {\n              (uniform.value as MiniGlUniform[]).forEach((u: MiniGlUniform, i: number) => {\n                material.attachUniforms(`${name}[${i}]`, u);\n              });\n\n              return;\n            }\n\n            if (uniform.type === 'struct') {\n              Object.entries(uniform.value as Record<string, MiniGlUniform>).forEach(([k, v]) => {\n                material.attachUniforms(`${name}.${k}`, v);\n              });\n\n              return;\n            }\n\n            _miniGl.debug('Material.attachUniforms', name || '', uniform.type);\n            material.uniformInstances.push({\n              uniform,\n              location: context.getUniformLocation(material.program, name!),\n            });\n          }\n        },\n      },\n      Uniform: {\n        enumerable: false,\n        value: class implements MiniGlUniform {\n          type: string;\n          value: unknown;\n          transpose?: boolean;\n          excludeFrom?: 'vertex' | 'fragment';\n          typeFn: string;\n\n          constructor(config: UniformConfig) {\n            this.type = 'float';\n            Object.assign(this, config);\n            this.typeFn =\n              (\n                {\n                  float: '1f',\n                  int: '1i',\n                  vec2: '2fv',\n                  vec3: '3fv',\n                  vec4: '4fv',\n                  mat4: 'Matrix4fv',\n                } as Record<string, string>\n              )[this.type] || '1f';\n          }\n\n          update(location?: WebGLUniformLocation | null) {\n            if (typeof this.value === 'undefined') return;\n\n            if (this.typeFn.startsWith('Matrix')) {\n              const fn = (context as unknown as Record<string, Function>)['uniform' + this.typeFn];\n\n              if (typeof fn === 'function') {\n                fn.call(context, location, this.transpose ?? false, this.value);\n              }\n\n              return;\n            }\n\n            const fn = (context as unknown as Record<string, Function>)['uniform' + this.typeFn];\n\n            if (typeof fn === 'function') {\n              if (this.typeFn.endsWith('v')) {\n                fn.call(context, location, this.value);\n              } else {\n                fn.call(context, location, this.value);\n              }\n            }\n          }\n\n          getDeclaration(name: string, type: 'vertex' | 'fragment', length: number = 0): string {\n            const uniform = this;\n\n            if (uniform.excludeFrom === type) return '';\n\n            if (uniform.type === 'array') {\n              const first = (uniform.value as MiniGlUniform[])[0];\n              const innerDecl = first.getDeclaration(name, type, (uniform.value as MiniGlUniform[]).length);\n\n              return innerDecl + `\\nconst int ${name}_length = ${(uniform.value as MiniGlUniform[]).length};`;\n            }\n\n            if (uniform.type === 'struct') {\n              let name_no_prefix = name.replace(/^u_/, '');\n\n              name_no_prefix = name_no_prefix.charAt(0).toUpperCase() + name_no_prefix.slice(1);\n              const members = Object.entries(uniform.value as Record<string, MiniGlUniform>)\n                .map(([memberName, memberUniform]) => memberUniform.getDeclaration(memberName, type).replace(/^uniform\\s*/, ''))\n                .join('\\n');\n              const lenSuffix = length > 0 ? `[${length}]` : '';\n\n              return `struct ${name_no_prefix} {\\n${members}\\n};\\nuniform ${name_no_prefix} ${name}${lenSuffix};`;\n            }\n\n            const lenSuffix = length > 0 ? `[${length}]` : '';\n\n            return `uniform ${uniform.type} ${name}${lenSuffix};`;\n          }\n        },\n      },\n      PlaneGeometry: {\n        enumerable: false,\n        value: class implements MiniGlPlaneGeometry {\n          attributes: {\n            position: MiniGlAttribute;\n            uv: MiniGlAttribute;\n            uvNorm: MiniGlAttribute;\n            index: MiniGlAttribute;\n            [k: string]: MiniGlAttribute;\n          };\n          xSegCount!: number;\n          ySegCount!: number;\n          vertexCount!: number;\n          quadCount!: number;\n          width!: number;\n          height!: number;\n          orientation!: string;\n\n          constructor(width: number = 1, height: number = 1, n: number = 1, i: number = 1, orientation: string = 'xz') {\n            context.createBuffer();\n            this.attributes = {\n              position: new _miniGl.Attribute({\n                target: context.ARRAY_BUFFER,\n                size: 3,\n              }),\n              uv: new _miniGl.Attribute({\n                target: context.ARRAY_BUFFER,\n                size: 2,\n              }),\n              uvNorm: new _miniGl.Attribute({\n                target: context.ARRAY_BUFFER,\n                size: 2,\n              }),\n              index: new _miniGl.Attribute({\n                target: context.ELEMENT_ARRAY_BUFFER,\n                size: 3,\n                type: context.UNSIGNED_SHORT,\n              }),\n            };\n            this.setTopology(n, i);\n            this.setSize(width, height, orientation);\n          }\n\n          setTopology(e: number = 1, t: number = 1) {\n            const nthis: any = this;\n\n            nthis.xSegCount = e;\n            nthis.ySegCount = t;\n            nthis.vertexCount = (nthis.xSegCount + 1) * (nthis.ySegCount + 1);\n            nthis.quadCount = nthis.xSegCount * nthis.ySegCount * 2;\n            nthis.attributes.uv.values = new Float32Array(2 * nthis.vertexCount);\n            nthis.attributes.uvNorm.values = new Float32Array(2 * nthis.vertexCount);\n            nthis.attributes.index.values = new Uint16Array(3 * nthis.quadCount);\n\n            // Generate mesh vertices and UV coordinates\n            for (let yy = 0; yy <= nthis.ySegCount; yy++) {\n              for (let xx = 0; xx <= nthis.xSegCount; xx++) {\n                const i = yy * (nthis.xSegCount + 1) + xx;\n\n                // UV coordinates (0-1)\n                nthis.attributes.uv.values[2 * i] = xx / nthis.xSegCount;\n                nthis.attributes.uv.values[2 * i + 1] = 1 - yy / nthis.ySegCount;\n\n                // Normalized UV coordinates (-1 to 1)\n                nthis.attributes.uvNorm.values[2 * i] = (xx / nthis.xSegCount) * 2 - 1;\n                nthis.attributes.uvNorm.values[2 * i + 1] = 1 - (yy / nthis.ySegCount) * 2;\n\n                // Create triangle indices (2 triangles per quad)\n                if (xx < nthis.xSegCount && yy < nthis.ySegCount) {\n                  const s = yy * nthis.xSegCount + xx;\n\n                  // First triangle\n                  nthis.attributes.index.values[6 * s] = i;\n                  nthis.attributes.index.values[6 * s + 1] = i + 1 + nthis.xSegCount;\n                  nthis.attributes.index.values[6 * s + 2] = i + 1;\n                  // Second triangle\n                  nthis.attributes.index.values[6 * s + 3] = i + 1;\n                  nthis.attributes.index.values[6 * s + 4] = i + 1 + nthis.xSegCount;\n                  nthis.attributes.index.values[6 * s + 5] = i + 2 + nthis.xSegCount;\n                }\n              }\n            }\n\n            nthis.attributes.uv.update();\n            nthis.attributes.uvNorm.update();\n            nthis.attributes.index.update();\n            _miniGl.debug('Geometry.setTopology');\n          }\n\n          /**\n           * Sets plane size and orientation\n           * @param width - Plane width\n           * @param height - Plane height\n           * @param orientation - Plane orientation (\"xz\", \"xy\", etc.)\n           */\n          setSize(width: number = 1, height: number = 1, orientation: string = 'xz') {\n            const geometry: any = this;\n\n            geometry.width = width;\n            geometry.height = height;\n            geometry.orientation = orientation;\n\n            // Check if we need to recreate position buffer\n            if (!(geometry.attributes.position.values && geometry.attributes.position.values.length === 3 * geometry.vertexCount)) {\n              geometry.attributes.position.values = new Float32Array(3 * geometry.vertexCount);\n            }\n\n            // Offsets for centering plane\n            const o = width / -2;\n            const r = height / -2;\n            const segment_width = width / geometry.xSegCount;\n            const segment_height = height / geometry.ySegCount;\n\n            // Generate vertex positions on grid\n            for (let yIndex = 0; yIndex <= geometry.ySegCount; yIndex++) {\n              const ty = r + yIndex * segment_height;\n\n              for (let xIndex = 0; xIndex <= geometry.xSegCount; xIndex++) {\n                const rx = o + xIndex * segment_width;\n                const l = yIndex * (geometry.xSegCount + 1) + xIndex;\n\n                // Set coordinates according to orientation\n                geometry.attributes.position.values[3 * l + 'xyz'.indexOf(orientation[0])] = rx;\n                geometry.attributes.position.values[3 * l + 'xyz'.indexOf(orientation[1])] = -ty;\n              }\n            }\n\n            geometry.attributes.position.update();\n            _miniGl.debug('Geometry.setSize');\n          }\n        },\n      },\n      Mesh: {\n        enumerable: false,\n        value: class implements MiniGlMesh {\n          geometry!: MiniGlPlaneGeometry;\n          material!: MiniGlMaterial;\n          wireframe: boolean = false;\n          attributeInstances: Array<{\n            attribute: MiniGlAttribute;\n            location: number;\n          }> = [];\n\n          constructor(geometry: MiniGlPlaneGeometry, material: MiniGlMaterial) {\n            const mesh: any = this;\n\n            mesh.geometry = geometry;\n            mesh.material = material;\n            mesh.wireframe = false;\n            mesh.attributeInstances = [];\n\n            Object.entries(mesh.geometry.attributes).forEach(([e, attribute]) => {\n              const attr = attribute as MiniGlAttribute;\n\n              mesh.attributeInstances.push({\n                attribute: attr,\n                location: attr.attach(e, mesh.material.program),\n              });\n            });\n\n            _miniGl.meshes.push(mesh);\n            _miniGl.debug('Mesh.constructor');\n          }\n\n          draw() {\n            context.useProgram(this.material.program);\n            this.material.uniformInstances.forEach((item: { uniform: MiniGlUniform; location: WebGLUniformLocation | null }) =>\n              item.uniform.update(item.location),\n            );\n            this.attributeInstances.forEach(({ attribute, location }) => attribute.use(location));\n            context.drawElements(\n              this.wireframe ? context.LINES : context.TRIANGLES,\n              this.geometry.attributes.index.values?.length || 0,\n              context.UNSIGNED_SHORT,\n              0,\n            );\n          }\n\n          remove() {\n            _miniGl.meshes = _miniGl.meshes.filter((m) => m !== this);\n          }\n        },\n      },\n      Attribute: {\n        enumerable: false,\n        value: class implements MiniGlAttribute {\n          type: number;\n          normalized: boolean;\n          buffer: WebGLBuffer | null;\n          target: number;\n          size: number;\n          values?: Float32Array | Uint16Array;\n          constructor(config: AttributeConfig) {\n            this.type = context.FLOAT;\n            this.normalized = false;\n            this.buffer = context.createBuffer();\n            this.target = config.target || context.ARRAY_BUFFER;\n            this.size = config.size || 1;\n            if (config.type !== undefined) {\n              this.type = config.type;\n            }\n            this.update();\n          }\n\n          update() {\n            if (typeof this.values !== 'undefined') {\n              context.bindBuffer(this.target, this.buffer);\n              context.bufferData(this.target, this.values, context.STATIC_DRAW);\n            }\n          }\n\n          attach(name: string, program: WebGLProgram): number {\n            const location = context.getAttribLocation(program, name);\n\n            if (this.target === context.ARRAY_BUFFER) {\n              context.enableVertexAttribArray(location);\n              context.vertexAttribPointer(location, this.size, this.type, this.normalized, 0, 0);\n            }\n\n            return location;\n          }\n\n          use(location: number): void {\n            context.bindBuffer(this.target, this.buffer);\n            if (this.target === context.ARRAY_BUFFER) {\n              context.enableVertexAttribArray(location);\n              context.vertexAttribPointer(location, this.size, this.type, this.normalized, 0, 0);\n            }\n          }\n        },\n      },\n    });\n\n    // 4x4 identity matrix\n    const identityMatrix = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n\n    // Common uniforms for all meshes\n    this.commonUniforms = {\n      projectionMatrix: new (this as unknown as { Uniform: MiniGlUniformConstructor }).Uniform({\n        type: 'mat4',\n        value: identityMatrix,\n      }),\n      modelViewMatrix: new (this as unknown as { Uniform: MiniGlUniformConstructor }).Uniform({\n        type: 'mat4',\n        value: identityMatrix,\n      }),\n      resolution: new (this as unknown as { Uniform: MiniGlUniformConstructor }).Uniform({ type: 'vec2', value: [1, 1] }),\n      aspectRatio: new (this as unknown as { Uniform: MiniGlUniformConstructor }).Uniform({ type: 'float', value: 1 }),\n    };\n  }\n\n  /**\n   * Sets canvas and viewport size\n   * @param width - Canvas width\n   * @param height - Canvas height\n   */\n  setSize(width: number = 640, height: number = 480) {\n    // Store dimensions in object\n    (this as unknown as { width: number; height: number }).width = width;\n    (this as unknown as { width: number; height: number }).height = height;\n\n    // Update canvas size\n    this.canvas.width = width;\n    this.canvas.height = height;\n\n    // Update WebGL viewport\n    this.gl.viewport(0, 0, width, height);\n\n    // Update uniforms\n    this.commonUniforms.resolution.value = [width, height];\n    this.commonUniforms.aspectRatio.value = width / height;\n\n    this.debug('MiniGL.setSize');\n  }\n\n  /**\n   * Sets up orthographic camera\n   * @param x - X offset\n   * @param y - Y offset\n   * @param z - Z offset\n   * @param near - Near clipping plane\n   * @param far - Far clipping plane\n   */\n  setOrthographicCamera(x = 0, y = 0, z = 0, near = -2000, far = 2000) {\n    const width = (this as unknown as { width: number }).width;\n    const height = (this as unknown as { height: number }).height;\n\n    // Orthographic projection matrix\n    this.commonUniforms.projectionMatrix.value = [\n      2 / width, // scaleX\n      0,\n      0,\n      0,\n      0,\n      2 / height, // scaleY\n      0,\n      0,\n      0,\n      0,\n      2 / (near - far), // scaleZ\n      0,\n      x, // translateX\n      y, // translateY\n      z, // translateZ\n      1,\n    ];\n\n    this.debug('setOrthographicCamera');\n  }\n\n  /**\n   * Renders all meshes to canvas\n   */\n  render() {\n    // Clear screen with transparent background\n    this.gl.clearColor(0, 0, 0, 0);\n    this.gl.clearDepth(1);\n\n    // Draw all meshes\n    this.meshes.forEach((mesh) => mesh.draw());\n  }\n\n  // dynamic fields\n  width!: number;\n  height!: number;\n\n  // declare static placeholders for TypeScript (they are assigned via defineProperties on instances)\n  static Uniform: any;\n  static Attribute: any;\n  static PlaneGeometry: any;\n  static Material: any;\n  static Mesh: any;\n}\n","export const SHADERS = {\n  vertex: `varying vec3 v_color;void main(){float time=u_time*u_global.noiseSpeed;vec2 noiseCoord=resolution*uvNorm*u_global.noiseFreq;vec2 st=1.-uvNorm.xy;float tilt=resolution.y/2.0*uvNorm.y;float incline=resolution.x*uvNorm.x/2.0*u_vertDeform.incline;float offset=resolution.x/2.0*u_vertDeform.incline*mix(u_vertDeform.offsetBottom,u_vertDeform.offsetTop,uv.y);float noise=snoise(vec3(noiseCoord.x*u_vertDeform.noiseFreq.x+time*u_vertDeform.noiseFlow,noiseCoord.y*u_vertDeform.noiseFreq.y,time*u_vertDeform.noiseSpeed+u_vertDeform.noiseSeed))*u_vertDeform.noiseAmp;noise*=1.0-pow(abs(uvNorm.y),2.0);noise=max(0.0,noise);vec3 pos=vec3(position.x,position.y+tilt+incline+noise-offset,position.z);if(u_active_colors[0]==1.){v_color=u_baseColor;}for(int i=0;i<u_waveLayers_length;i++){if(u_active_colors[i+1]==1.){WaveLayers layer=u_waveLayers[i];float noise=smoothstep(layer.noiseFloor,layer.noiseCeil,snoise(vec3(noiseCoord.x*layer.noiseFreq.x+time*layer.noiseFlow,noiseCoord.y*layer.noiseFreq.y,time*layer.noiseSpeed+layer.noiseSeed))/2.0+0.5);v_color=blendNormal(v_color,layer.color,pow(noise,4.));}}gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.0);}`,\n  noise: `vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`,\n  blend: `vec3 blendNormal(vec3 base,vec3 blend){return blend;}vec3 blendNormal(vec3 base,vec3 blend,float opacity){return(blendNormal(base,blend)*opacity+base*(1.0-opacity));}`,\n  fragment: `varying vec3 v_color;void main(){vec3 color=v_color;if(u_darken_top==1.0){vec2 st=gl_FragCoord.xy/resolution.xy;color.g-=pow(st.y+sin(-12.0)*st.x,u_shadow_power)*0.4;}gl_FragColor=vec4(color,1.0);}`,\n} as const;\n","import { MeshGradientToggleColorsConfig, Vec4 } from './types';\n\n// Animation and timing constants\nexport const DEFAULT_TIME_VALUE = 1253106;\nexport const MAX_FRAME_DELTA = 1000 / 15; // 15 FPS limit\nexport const ANIMATION_DELTA_FAST = 160;\nexport const ANIMATION_DELTA_SLOW = -160;\nexport const DEFAULT_ANIMATION_SPEED = 1.0;\n\n// CSS and styling constants\nexport const MAX_CSS_VAR_RETRIES = 200;\nexport const SCROLLING_REFRESH_DELAY = 200;\nexport const MIN_WIDTH_FOR_LEGEND = 1111;\nexport const DEFAULT_HEIGHT = 600;\nexport const LOADED_CLASS_DELAY = 3000;\n\n// Resize throttling constants\nexport const RESIZE_THROTTLE_DELAY = 300; // milliseconds\n\n// Gradient configuration constants\nexport const DEFAULT_DENSITY: [number, number] = [0.06, 0.16];\nexport const DEFAULT_ZOOM = 1;\nexport const DEFAULT_ROTATION = 0;\nexport const DEFAULT_PRESET_NAME = '';\nexport const DEFAULT_WIREFRAME = false;\n\nexport const DEFAULT_PAUSE_OBSERVER_OPTIONS: IntersectionObserverInit = {\n  root: null,\n  rootMargin: '0px',\n  threshold: 0.05,\n};\n\nexport const DEFAULT_ACTIVE_TOGGLE_COLORS: MeshGradientToggleColorsConfig = {\n  1: true,\n  2: true,\n  3: true,\n  4: true,\n};\n\nexport const DEFAULT_APPEARANCE_MODE = 'smooth';\nexport const DEFAULT_APPEARANCE_DURATION = 300;\nexport const DEFAULT_TRANSITION_DURATION = 300;\n\n// Noise and animation constants\nexport const DEFAULT_AMP = 320;\nexport const DEFAULT_SEED = 5;\nexport const DEFAULT_FREQ_X = 14e-5;\nexport const DEFAULT_FREQ_Y = 29e-5;\nexport const DEFAULT_FREQ_DELTA = 1e-5;\n\n// Shader constants\nexport const DEFAULT_SHADOW_POWER = 5;\nexport const SMALL_SCREEN_SHADOW_POWER = 5;\nexport const LARGE_SCREEN_SHADOW_POWER = 6;\nexport const SMALL_SCREEN_WIDTH_THRESHOLD = 600;\n\n// Uniform values\nexport const GLOBAL_NOISE_SPEED = 5e-6;\nexport const VERT_DEFORM_NOISE_SPEED = 10;\nexport const VERT_DEFORM_NOISE_FLOW = 3;\nexport const VERT_DEFORM_OFFSET = -0.5;\nexport const VERT_DEFORM_NOISE_FREQ: [number, number] = [3, 4];\n\n// Wave layer constants\nexport const WAVE_LAYER_BASE_NOISE_SPEED = 11;\nexport const WAVE_LAYER_NOISE_SPEED_INCREMENT = 0.3;\nexport const WAVE_LAYER_BASE_NOISE_FLOW = 6.5;\nexport const WAVE_LAYER_NOISE_FLOW_INCREMENT = 0.3;\nexport const WAVE_LAYER_SEED_MULTIPLIER = 10;\nexport const WAVE_LAYER_NOISE_FLOOR = 0.1;\nexport const WAVE_LAYER_BASE_NOISE_CEIL = 0.63;\nexport const WAVE_LAYER_NOISE_CEIL_INCREMENT = 0.07;\n\n// Default colors (fallback when CSS vars are not available)\nexport const DEFAULT_FALLBACK_COLORS = [16711680, 16711680, 16711935, 65280, 255];\n\n// CSS variable names\nexport const CSS_GRADIENT_VARS = [\n  '--mesh-gradient-color-1',\n  '--mesh-gradient-color-2',\n  '--mesh-gradient-color-3',\n  '--mesh-gradient-color-4',\n] as const;\n\n// Active colors default\nexport const DEFAULT_ACTIVE_COLORS: Vec4 = [1, 1, 1, 1];\n\n// WebGL debug query\nexport const DEBUG_QUERY_STRING = 'debug=webgl';\n","import type {\n  Vec3,\n  Vec4,\n  MiniGlUniform,\n  MiniGlMesh,\n  MiniGlMaterial,\n  MiniGlPlaneGeometry,\n  MiniGlMeshConstructor,\n  MiniGlPlaneGeometryConstructor,\n  MiniGlMaterialConstructor,\n  MiniGlUniformConstructor,\n  GradientConfig,\n  ShaderFiles,\n  EventHandler,\n  AnimationFrameHandler,\n  MeshGradientOptions,\n  MeshGradientUpdateOptions,\n  MeshGradientColorsConfig,\n  MeshGradientInitOptions,\n} from './types';\n\nimport { normalizeColor, setProperty, parseHexColor, genRandomColors } from './utils';\nimport { MiniGl } from './minigl';\nimport { SHADERS } from './shaders';\nimport * as CONSTANTS from './constants';\n\n/**\n * Gradient class for creating animated mesh gradients\n * Manages WebGL rendering of animated gradient effects\n */\nexport class MeshGradient {\n  /**\n   * Initialize the gradient\n   * @param selector - The selector for the canvas element or the canvas element itself\n   * @param options - The options for the gradient\n   * @returns The gradient instance\n   */\n  public init!: (selector: string | HTMLCanvasElement, options?: MeshGradientOptions & MeshGradientInitOptions) => MeshGradient;\n\n  /**\n   * Whether the gradient is been initialized by calling `init` method.\n   * @default false\n   */\n  public isInitialized = false;\n  private el?: HTMLCanvasElement | null;\n  private amp = CONSTANTS.DEFAULT_AMP;\n  private seed = CONSTANTS.DEFAULT_SEED;\n  private freqX = CONSTANTS.DEFAULT_FREQ_X;\n  private freqY = CONSTANTS.DEFAULT_FREQ_Y;\n  // @ts-ignore\n  private freqDelta = CONSTANTS.DEFAULT_FREQ_DELTA;\n  private activeColors: Vec4 = CONSTANTS.DEFAULT_ACTIVE_COLORS;\n  private isStatic = false;\n  private animationSpeed = CONSTANTS.DEFAULT_ANIMATION_SPEED;\n  private autoPauseOnInvisible = true; // Auto pause when gradient goes out of viewport\n\n  private minigl?: MiniGl;\n\n  private angle: number = 0;\n  private isLoadedClass: boolean = false;\n\n  private resizeTimeout?: number;\n  private resizeDelay: number = CONSTANTS.RESIZE_THROTTLE_DELAY;\n  private isIntersecting: boolean = false;\n\n  private wasPlayingBeforeInvisible = false; // Animation state before going out of viewport\n  private intersectionObserver?: IntersectionObserver; // Observer for tracking visibility\n  // @ts-ignore\n  private pauseObserverOptions: IntersectionObserverInit = CONSTANTS.DEFAULT_PAUSE_OBSERVER_OPTIONS;\n  private width?: number;\n  private height?: number;\n\n  private shaderFiles?: ShaderFiles;\n  private vertexShader?: string;\n  private sectionColors?: Vec3[];\n  private configColors?: MeshGradientColorsConfig; // Colors from configuration with priority over CSS vars\n  private appearanceMode: 'smooth' | 'default' = CONSTANTS.DEFAULT_APPEARANCE_MODE;\n  private appearanceDuration = CONSTANTS.DEFAULT_APPEARANCE_DURATION;\n  private computedCanvasStyle?: CSSStyleDeclaration;\n  private conf?: GradientConfig;\n  private uniforms?: Record<string, MiniGlUniform>;\n  private mesh?: MiniGlMesh;\n  private material?: MiniGlMaterial;\n  private geometry?: MiniGlPlaneGeometry;\n  private t = CONSTANTS.DEFAULT_TIME_VALUE;\n  private last = 0;\n  private frame = 0;\n\n  private xSegCount?: number;\n  private ySegCount?: number;\n\n  private resize!: EventHandler;\n\n  private animate!: AnimationFrameHandler;\n  private addIsLoadedClass!: EventHandler;\n\n  constructor() {\n    this.initializeProperties();\n    this.setupEventHandlers();\n  }\n\n  /**\n   * Completely destroys the gradient and cleans up all resources.\n   * This method should be called when the gradient is no longer needed\n   */\n  public destroy(): void {\n    this.stopAnimationAndTimers();\n    this.disconnect();\n    this.removeCssClasses();\n    this.cleanupWebGLResources();\n    this.clearObjectReferences();\n    this.isInitialized = false;\n  }\n\n  /**\n   * Updates the gradient with new configuration. Supports fade transition if enabled.\n   * @param config - New configuration options\n   */\n  public update(config?: MeshGradientOptions & MeshGradientUpdateOptions) {\n    if (!this.el) return;\n    const transition = config?.transition ?? true;\n\n    if (transition) {\n      this.updateWithFadeTransition(config || {});\n    } else {\n      this.destroy();\n      this.init(this.el as HTMLCanvasElement, { ...config, appearance: 'default' });\n    }\n  }\n\n  /**\n   * Updates gradient with smooth fade transition\n   * @param config - New configuration options\n   */\n  private updateWithFadeTransition(config: MeshGradientOptions & MeshGradientUpdateOptions) {\n    if (!this.el) return;\n\n    const duration = config.transitionDuration || CONSTANTS.DEFAULT_TRANSITION_DURATION;\n    const canvas = this.el;\n\n    const originalCanvas = canvas;\n\n    canvas.style.transition = `opacity ${duration}ms ease-in-out`;\n    canvas.style.opacity = '1';\n\n    requestAnimationFrame(() => {\n      canvas.style.opacity = '0';\n    });\n\n    setTimeout(() => {\n      this.destroy();\n\n      this.init(originalCanvas, config);\n\n      if (this.el) {\n        this.el.style.opacity = '0';\n        this.el.style.transition = `opacity ${duration}ms ease-in-out`;\n\n        requestAnimationFrame(() => {\n          if (this.el) {\n            this.el.style.opacity = '';\n          }\n        });\n\n        setTimeout(() => {\n          if (this.el) {\n            this.el.style.transition = '';\n            this.el.style.opacity = '';\n          }\n        }, duration);\n      }\n    }, duration);\n  }\n\n  /**\n   * Manually start gradient animation\n   */\n  public play(): void {\n    if (!this.conf) return;\n\n    this.conf.playing = true;\n    requestAnimationFrame(this.animate);\n  }\n\n  /**\n   * Manually pause gradient animation\n   */\n  public pause(): void {\n    if (!this.conf) return;\n\n    this.conf.playing = false;\n  }\n\n  /**\n   * Set animation speed multiplier\n   * @param speed - Speed multiplier (1.0 is normal speed, 0.5 is half speed, 2.0 is double speed)\n   */\n  public setAnimationSpeed(speed: number): void {\n    if (speed <= 0) {\n      throw new Error('Animation speed must be greater than 0');\n    }\n    this.animationSpeed = speed;\n  }\n\n  /**\n   * Get current animation speed multiplier\n   * @returns Current animation speed\n   */\n  public getAnimationSpeed(): number {\n    return this.animationSpeed;\n  }\n\n  /**\n   * Enable or disable auto-pause when gradient goes out of viewport\n   * @param enabled - Whether to enable auto-pause functionality\n   */\n  public toggleAutoPause(enabled: boolean): void {\n    this.autoPauseOnInvisible = enabled;\n\n    if (!enabled && this.intersectionObserver) {\n      this.intersectionObserver.disconnect();\n      this.intersectionObserver = undefined;\n      if (!this.isIntersecting && this.wasPlayingBeforeInvisible) {\n        this.play();\n        this.wasPlayingBeforeInvisible = false;\n      }\n    } else if (enabled && this.el && !this.intersectionObserver) {\n      this.initIntersectionObserver();\n    }\n  }\n\n  /**\n   * Stops animation and clears all active timers\n   */\n  private stopAnimationAndTimers(): void {\n    this.pause();\n    if (this.resizeTimeout) {\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = undefined;\n    }\n  }\n\n  /**\n   * Removes CSS classes from canvas and its parent\n   */\n  private removeCssClasses(): void {\n    if (this.el) {\n      this.el.classList.remove('isLoaded');\n      if (this.el.parentElement) {\n        this.el.parentElement.classList.remove('isLoaded');\n      }\n    }\n  }\n\n  /**\n   * Cleans up all WebGL resources including shaders, buffers, and context\n   */\n  private cleanupWebGLResources(): void {\n    if (this.mesh) {\n      this.mesh.remove();\n      this.mesh = undefined;\n    }\n\n    if (!this.minigl) return;\n\n    this.cleanupMiniGlMeshes();\n    this.cleanupWebGLContext();\n    this.clearCanvasAsFallback();\n  }\n\n  /**\n   * Cleans up all meshes from MiniGL\n   */\n  private cleanupMiniGlMeshes(): void {\n    if (!this.minigl) return;\n\n    this.minigl.meshes.forEach((mesh) => {\n      if (mesh.remove) mesh.remove();\n    });\n    this.minigl.meshes = [];\n  }\n\n  /**\n   * Cleans up WebGL context, shaders and buffers\n   */\n  private cleanupWebGLContext(): void {\n    if (!this.minigl?.gl) return;\n\n    const gl = this.minigl.gl;\n\n    // Clear the canvas completely\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    this.deleteShaders(gl);\n    this.deleteBuffers(gl);\n  }\n\n  /**\n   * Deletes shaders and program from WebGL context\n   */\n  private deleteShaders(gl: WebGLRenderingContext): void {\n    if (!this.material) return;\n\n    if (this.material.vertexShader) {\n      gl.deleteShader(this.material.vertexShader);\n    }\n    if (this.material.fragmentShader) {\n      gl.deleteShader(this.material.fragmentShader);\n    }\n    if (this.material.program) {\n      gl.deleteProgram(this.material.program);\n    }\n  }\n\n  /**\n   * Deletes geometry buffers from WebGL context\n   */\n  private deleteBuffers(gl: WebGLRenderingContext): void {\n    if (!this.geometry?.attributes) return;\n\n    Object.values(this.geometry.attributes).forEach((attribute) => {\n      if (attribute.buffer) {\n        gl.deleteBuffer(attribute.buffer);\n      }\n    });\n  }\n\n  /**\n   * Clears canvas using 2D context as fallback\n   */\n  private clearCanvasAsFallback(): void {\n    if (!this.minigl?.canvas) return;\n\n    const canvas = this.minigl.canvas;\n    const ctx = canvas.getContext('2d');\n\n    if (ctx) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  }\n\n  /**\n   * Clears all object references to prevent memory leaks\n   */\n  private clearObjectReferences(): void {\n    this.el = null;\n    this.minigl = undefined;\n    this.mesh = undefined;\n    this.material = undefined;\n    this.geometry = undefined;\n    this.uniforms = undefined;\n    this.shaderFiles = undefined;\n    this.vertexShader = undefined;\n    this.sectionColors = undefined;\n    this.configColors = undefined;\n    this.computedCanvasStyle = undefined;\n    this.conf = undefined;\n  }\n\n  /**\n   * Initialize all gradient properties with default values\n   * Uses Object.assign for better performance than multiple setProperty calls\n   */\n  private initializeProperties(): void {\n    const defaultProperties = {\n      // Core properties\n      el: undefined as HTMLCanvasElement | null | undefined,\n      minigl: undefined as MiniGl | undefined,\n\n      // State properties\n      angle: 0,\n      isLoadedClass: false,\n      isInitialized: false,\n      resizeTimeout: undefined as number | undefined,\n      resizeDelay: CONSTANTS.RESIZE_THROTTLE_DELAY,\n      isIntersecting: false,\n\n      // Rendering properties\n      shaderFiles: undefined as ShaderFiles | undefined,\n      vertexShader: undefined as string | undefined,\n      sectionColors: undefined as Vec3[] | undefined,\n      configColors: undefined as MeshGradientColorsConfig | undefined,\n      appearanceMode: CONSTANTS.DEFAULT_APPEARANCE_MODE as 'smooth' | 'default',\n      appearanceDuration: CONSTANTS.DEFAULT_APPEARANCE_DURATION,\n      computedCanvasStyle: undefined as CSSStyleDeclaration | undefined,\n      conf: undefined as GradientConfig | undefined,\n      uniforms: undefined as Record<string, MiniGlUniform> | undefined,\n      mesh: undefined as MiniGlMesh | undefined,\n      material: undefined as MiniGlMaterial | undefined,\n      geometry: undefined as MiniGlPlaneGeometry | undefined,\n\n      // Animation properties\n      t: CONSTANTS.DEFAULT_TIME_VALUE,\n      last: 0,\n      frame: 0,\n\n      // Dimension properties\n      width: undefined as number | undefined,\n      height: undefined as number | undefined,\n      xSegCount: undefined as number | undefined,\n      ySegCount: undefined as number | undefined,\n\n      // Effects properties\n      amp: CONSTANTS.DEFAULT_AMP,\n      seed: CONSTANTS.DEFAULT_SEED,\n      freqX: CONSTANTS.DEFAULT_FREQ_X,\n      freqY: CONSTANTS.DEFAULT_FREQ_Y,\n      freqDelta: CONSTANTS.DEFAULT_FREQ_DELTA,\n      activeColors: [...CONSTANTS.DEFAULT_ACTIVE_COLORS] as Vec4,\n      animationSpeed: CONSTANTS.DEFAULT_ANIMATION_SPEED,\n      autoPauseOnInvisible: true,\n    };\n\n    Object.assign(this, defaultProperties);\n  }\n\n  /**\n   * Set up all event handlers\n   */\n  private setupEventHandlers(): void {\n    setProperty(this, 'resize', () => {\n      if (this.resizeTimeout) {\n        clearTimeout(this.resizeTimeout);\n      }\n\n      // @ts-ignore setTimeout returns number in browser\n      this.resizeTimeout = window.setTimeout(() => {\n        this.performResize();\n      }, this.resizeDelay);\n    });\n\n    setProperty(this, 'animate', (e: number) => {\n      if (!this.shouldSkipFrame(e)) {\n        this.t += Math.min(e - this.last, CONSTANTS.MAX_FRAME_DELTA) * this.animationSpeed;\n        this.last = e;\n\n        if (this.mesh && this.mesh.material && this.mesh.material.uniforms && this.mesh.material.uniforms.u_time) {\n          this.mesh.material.uniforms.u_time.value = this.t;\n        }\n        if (this.minigl) this.minigl.render();\n      }\n      if (this.last !== 0 && this.isStatic) {\n        if (this.minigl) this.minigl.render();\n        this.disconnect();\n\n        return;\n      }\n      this.frame += 1;\n      if (this.conf && this.conf.playing) {\n        requestAnimationFrame(this.animate);\n      }\n    });\n\n    setProperty(this, 'addIsLoadedClass', () => {\n      if (!this.isLoadedClass) {\n        this.isLoadedClass = true;\n\n        if (this.el) {\n          // Apply smooth appearance if enabled\n          if (this.appearanceMode === 'smooth') {\n            this.el.style.opacity = '0';\n            this.el.style.transition = `opacity ${this.appearanceDuration}ms ease-in-out`;\n\n            // Trigger smooth appearance\n            requestAnimationFrame(() => {\n              if (this.el) {\n                this.el.style.opacity = '1';\n              }\n            });\n\n            // Clean up transition after animation completes\n            setTimeout(() => {\n              if (this.el) {\n                this.el.style.transition = '';\n                this.el.style.opacity = '';\n              }\n            }, this.appearanceDuration);\n          }\n\n          this.el.classList.add('isLoaded');\n        }\n\n        setTimeout(() => {\n          if (this.el && this.el.parentElement) {\n            this.el.parentElement.classList.add('isLoaded');\n          }\n        }, CONSTANTS.LOADED_CLASS_DELAY);\n      }\n    });\n\n    setProperty(this, 'init', (selector: string | HTMLCanvasElement, options?: MeshGradientOptions & MeshGradientInitOptions) => {\n      this.seed = options?.seed || Math.random() * 100;\n      this.isStatic = options?.isStatic || false;\n      this.animationSpeed = options?.animationSpeed || CONSTANTS.DEFAULT_ANIMATION_SPEED;\n      this.resizeDelay = options?.resizeDelay || CONSTANTS.RESIZE_THROTTLE_DELAY;\n\n      if (typeof options?.frequency === 'number') {\n        this.freqX = options.frequency;\n        this.freqY = options.frequency;\n        this.freqDelta = options.frequency;\n      } else {\n        this.freqX = options?.frequency?.x || CONSTANTS.DEFAULT_FREQ_X;\n        this.freqY = options?.frequency?.y || CONSTANTS.DEFAULT_FREQ_Y;\n        this.freqDelta = options?.frequency?.delta || CONSTANTS.DEFAULT_FREQ_DELTA;\n      }\n\n      const activeColors = {\n        ...CONSTANTS.DEFAULT_ACTIVE_TOGGLE_COLORS,\n        ...options?.activeColors,\n      };\n\n      this.activeColors = [activeColors[1] ? 1 : 0, activeColors[2] ? 1 : 0, activeColors[3] ? 1 : 0, activeColors[4] ? 1 : 0];\n\n      this.configColors = options?.colors ?? (options?.cssVariablesFallback ? undefined : genRandomColors());\n\n      // Store appearance settings\n      this.appearanceMode = options?.appearance || CONSTANTS.DEFAULT_APPEARANCE_MODE;\n      this.appearanceDuration = options?.appearanceDuration || CONSTANTS.DEFAULT_APPEARANCE_DURATION;\n\n      this.pauseObserverOptions = {\n        ...CONSTANTS.DEFAULT_PAUSE_OBSERVER_OPTIONS,\n        ...options?.pauseObserverOptions,\n      };\n\n      this.autoPauseOnInvisible = options?.pauseOnOutsideViewport ?? true;\n\n      this.conf = {\n        presetName: CONSTANTS.DEFAULT_PRESET_NAME,\n        wireframe: CONSTANTS.DEFAULT_WIREFRAME,\n        zoom: CONSTANTS.DEFAULT_ZOOM,\n        rotation: CONSTANTS.DEFAULT_ROTATION,\n        density: CONSTANTS.DEFAULT_DENSITY,\n        playing: true,\n      };\n\n      this.el = typeof selector === 'string' ? document.querySelector(selector) : selector;\n      this.connect();\n\n      return this;\n    });\n  }\n\n  /**\n   * Performs actual resize operations (used by debounced resize handler)\n   */\n  private performResize(): void {\n    if (this.el) {\n      const rect = this.el.getBoundingClientRect();\n\n      this.width = rect.width;\n      this.height = rect.height;\n    }\n    if (this.minigl && this.width && this.height) {\n      this.minigl.setSize(this.width, this.height);\n      this.minigl.setOrthographicCamera();\n    }\n    this.xSegCount = Math.ceil((this.width as number) * (this.conf ? this.conf.density[0] : CONSTANTS.DEFAULT_DENSITY[0]));\n    this.ySegCount = Math.ceil((this.height || 0) * (this.conf ? this.conf.density[1] : CONSTANTS.DEFAULT_DENSITY[1]));\n    if (this.mesh && this.mesh.geometry) {\n      this.mesh.geometry.setTopology(this.xSegCount as number, this.ySegCount as number);\n      this.mesh.geometry.setSize(this.width as number, this.height || 0);\n    }\n    if (this.mesh && this.mesh.material && this.mesh.material.uniforms && this.mesh.material.uniforms.u_shadow_power) {\n      this.mesh.material.uniforms.u_shadow_power.value =\n        this.width! < CONSTANTS.SMALL_SCREEN_WIDTH_THRESHOLD ? CONSTANTS.SMALL_SCREEN_SHADOW_POWER : CONSTANTS.LARGE_SCREEN_SHADOW_POWER;\n    }\n  }\n\n  /**\n   * Establishes WebGL connection and initializes shaders\n   */\n  private async connect(): Promise<void> {\n    this.shaderFiles = SHADERS;\n\n    // Find canvas element\n    if (document.querySelectorAll('canvas').length < 1) {\n      // eslint-disable-next-line no-console\n      console.log('DID NOT LOAD CANVAS');\n    } else {\n      // choose first canvas if el not yet set\n      if (!this.el) {\n        this.el = document.querySelector('canvas') as HTMLCanvasElement;\n      }\n      if (this.el) {\n        // Initialize canvas dimensions\n        const rect = this.el.getBoundingClientRect();\n\n        this.width = rect.width;\n        this.height = rect.height;\n\n        // Set initial opacity for smooth appearance\n        if (this.appearanceMode === 'smooth') {\n          this.el.style.opacity = '0';\n        }\n\n        this.minigl = new MiniGl(this.el, null, null, true);\n\n        // Initialize intersection observer for auto-pause functionality\n        this.initIntersectionObserver();\n\n        this.isInitialized = true;\n\n        requestAnimationFrame(() => {\n          if (this.el) {\n            this.computedCanvasStyle = getComputedStyle(this.el);\n            this.waitForCssVars();\n          }\n        });\n      }\n    }\n  }\n\n  private disconnect() {\n    // Disconnect intersection observer\n    if (this.intersectionObserver) {\n      this.intersectionObserver.disconnect();\n      this.intersectionObserver = undefined;\n    }\n\n    // Remove resize listener\n    window.removeEventListener('resize', this.resize);\n  }\n\n  /**\n   * Initialize intersection observer for auto-pause functionality\n   */\n  private initIntersectionObserver(): void {\n    if (!this.el || !this.autoPauseOnInvisible) return;\n\n    const options = this.pauseObserverOptions;\n\n    this.intersectionObserver = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        const isIntersecting = entry.isIntersecting;\n\n        if (this.isIntersecting !== isIntersecting) {\n          this.isIntersecting = isIntersecting;\n\n          if (this.autoPauseOnInvisible && this.conf) {\n            if (isIntersecting) {\n              // Element became visible - resume if was playing before\n              if (this.wasPlayingBeforeInvisible) {\n                this.play();\n                this.wasPlayingBeforeInvisible = false;\n              }\n            } else {\n              // Element became invisible - pause if currently playing\n              if (this.conf.playing) {\n                this.wasPlayingBeforeInvisible = true;\n                this.pause();\n              }\n            }\n          }\n        }\n      });\n    }, options);\n\n    this.intersectionObserver.observe(this.el);\n  }\n\n  private initMaterial(): InstanceType<MiniGl['Material']> {\n    if (!this.minigl) throw new Error('MiniGl not initialized');\n\n    const minigl = this.minigl as unknown as { Uniform: MiniGlUniformConstructor };\n\n    this.uniforms = {\n      ...this.createBasicUniforms(minigl),\n      ...this.createGlobalUniform(minigl),\n      ...this.createVertexDeformUniform(minigl),\n      ...this.createColorUniforms(minigl),\n    };\n\n    this.createWaveLayersUniforms(minigl);\n    this.buildVertexShader();\n\n    return new (this.minigl as unknown as { Material: MiniGlMaterialConstructor }).Material(\n      this.vertexShader!,\n      this.shaderFiles!.fragment,\n      this.uniforms,\n    );\n  }\n\n  /**\n   * Creates basic uniforms (time, shadow, darken, active colors)\n   */\n  private createBasicUniforms(minigl: { Uniform: MiniGlUniformConstructor }) {\n    return {\n      u_time: new minigl.Uniform({ value: 0 }),\n      u_shadow_power: new minigl.Uniform({ value: 5 }),\n      u_darken_top: new minigl.Uniform({\n        value: this.el && this.el.dataset && this.el.dataset.jsDarkenTop === '' ? 1 : 0,\n      }),\n      u_active_colors: new minigl.Uniform({\n        value: this.activeColors,\n        type: 'vec4',\n      }),\n    };\n  }\n\n  /**\n   * Creates global uniform with noise frequency and speed settings\n   */\n  private createGlobalUniform(minigl: { Uniform: MiniGlUniformConstructor }) {\n    return {\n      u_global: new minigl.Uniform({\n        value: {\n          noiseFreq: new minigl.Uniform({\n            value: [this.freqX, this.freqY],\n            type: 'vec2',\n          }),\n          noiseSpeed: new minigl.Uniform({ value: 5e-6 }),\n        },\n        type: 'struct',\n      }),\n    };\n  }\n\n  /**\n   * Creates vertex deformation uniform for geometry animation\n   */\n  private createVertexDeformUniform(minigl: { Uniform: MiniGlUniformConstructor }) {\n    return {\n      u_vertDeform: new minigl.Uniform({\n        value: {\n          incline: new minigl.Uniform({\n            value: Math.sin(this.angle) / Math.cos(this.angle),\n          }),\n          offsetTop: new minigl.Uniform({ value: -0.5 }),\n          offsetBottom: new minigl.Uniform({ value: -0.5 }),\n          noiseFreq: new minigl.Uniform({\n            value: [3, 4],\n            type: 'vec2',\n          }),\n          noiseAmp: new minigl.Uniform({ value: this.amp }),\n          noiseSpeed: new minigl.Uniform({ value: 10 }),\n          noiseFlow: new minigl.Uniform({ value: 3 }),\n          noiseSeed: new minigl.Uniform({ value: this.seed }),\n        },\n        type: 'struct',\n        excludeFrom: 'fragment',\n      }),\n    };\n  }\n\n  /**\n   * Creates color uniforms for base color and wave layers\n   */\n  private createColorUniforms(minigl: { Uniform: MiniGlUniformConstructor }) {\n    return {\n      u_baseColor: new minigl.Uniform({\n        value: (this.sectionColors && this.sectionColors[0]) || [1, 0, 0],\n        type: 'vec3',\n        excludeFrom: 'fragment',\n      }),\n      u_waveLayers: new minigl.Uniform({\n        value: [],\n        excludeFrom: 'fragment',\n        type: 'array',\n      }),\n    };\n  }\n\n  /**\n   * Creates wave layers uniforms for multi-color gradient effects\n   */\n  private createWaveLayersUniforms(minigl: { Uniform: MiniGlUniformConstructor }): void {\n    if (!this.uniforms || !this.sectionColors) return;\n\n    for (let e = 1; e < this.sectionColors.length; e += 1) {\n      (this.uniforms.u_waveLayers.value as MiniGlUniform[]).push(\n        new minigl.Uniform({\n          type: 'struct',\n          value: {\n            color: new minigl.Uniform({\n              value: this.sectionColors[e],\n              type: 'vec3',\n            }),\n            noiseFreq: new minigl.Uniform({\n              value: [2 + e / this.sectionColors.length, 3 + e / this.sectionColors.length],\n              type: 'vec2',\n            }),\n            noiseSpeed: new minigl.Uniform({\n              value: 11 + 0.3 * e,\n            }),\n            noiseFlow: new minigl.Uniform({\n              value: 6.5 + 0.3 * e,\n            }),\n            noiseSeed: new minigl.Uniform({\n              value: this.seed + 10 * e,\n            }),\n            noiseFloor: new minigl.Uniform({ value: 0.1 }),\n            noiseCeil: new minigl.Uniform({\n              value: 0.63 + 0.07 * e,\n            }),\n          },\n        }),\n      );\n    }\n  }\n\n  /**\n   * Builds vertex shader by combining noise, blend, and vertex shader files\n   */\n  private buildVertexShader(): void {\n    this.vertexShader = [this.shaderFiles!.noise, this.shaderFiles!.blend, this.shaderFiles!.vertex].join('\\n\\n');\n  }\n\n  /**\n   * Initialize mesh with material and geometry\n   */\n  private initMesh() {\n    this.material = this.initMaterial();\n    // Create geometry and mesh\n    this.geometry = new (\n      this.minigl as unknown as {\n        PlaneGeometry: MiniGlPlaneGeometryConstructor;\n      }\n    ).PlaneGeometry();\n    this.mesh = new (this.minigl as unknown as { Mesh: MiniGlMeshConstructor }).Mesh(this.geometry, this.material);\n  }\n\n  /**\n   * Determines if current frame should be skipped for performance\n   * @param e - Current time\n   * @returns true if frame should be skipped\n   */\n  private shouldSkipFrame(_e: number) {\n    return (\n      !!window.document.hidden || // Tab is hidden\n      !(this.conf && this.conf.playing) || // Animation paused\n      this.frame % 2 === 0 || // Skip every other frame\n      undefined\n    );\n  }\n\n  /**\n   * Initialize gradient system - colors, mesh, and animation\n   */\n  private initSystem() {\n    this.initGradientColors();\n    this.initMesh();\n    this.performResize(); // Call directly without debounce during initialization\n    requestAnimationFrame(this.animate);\n    window.addEventListener('resize', this.resize);\n  }\n\n  /**\n   * Waits for CSS variables to be loaded before initializing\n   * Uses Promise-based approach with timeout instead of recursive retries\n   */\n  private async waitForCssVars(): Promise<void> {\n    // If colors are provided in config, skip CSS variable waiting\n    if (this.configColors) {\n      this.initSystem();\n      this.addIsLoadedClass();\n\n      return;\n    }\n\n    // Check if CSS vars are already available\n    if (this.areCssVarsLoaded()) {\n      this.initSystem();\n      this.addIsLoadedClass();\n\n      return;\n    }\n\n    // Wait for CSS vars with timeout\n    try {\n      await this.pollForCssVars();\n      this.initSystem();\n      this.addIsLoadedClass();\n    } catch {\n      // Fallback to default colors if timeout\n      this.useFallbackColors();\n      this.initSystem();\n    }\n  }\n\n  /**\n   * Checks if CSS variables are loaded and contain valid color values\n   */\n  private areCssVarsLoaded(): boolean {\n    return Boolean(\n      this.computedCanvasStyle && this.computedCanvasStyle.getPropertyValue(CONSTANTS.CSS_GRADIENT_VARS[0]).indexOf('#') !== -1,\n    );\n  }\n\n  /**\n   * Polls for CSS variables with exponential backoff and timeout\n   */\n  private pollForCssVars(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const maxWaitTime = 3000; // 3 seconds timeout\n      const checkInterval = 50; // Start with 50ms intervals\n      const startTime = Date.now();\n\n      const checkCssVars = () => {\n        if (this.areCssVarsLoaded()) {\n          resolve();\n\n          return;\n        }\n\n        if (Date.now() - startTime > maxWaitTime) {\n          reject(new Error('CSS variables timeout'));\n\n          return;\n        }\n\n        // Exponential backoff: increase interval gradually\n        const elapsed = Date.now() - startTime;\n        const interval = Math.min(checkInterval + elapsed / 20, 200);\n\n        setTimeout(checkCssVars, interval);\n      };\n\n      checkCssVars();\n    });\n  }\n\n  /**\n   * Uses fallback colors when CSS variables are not available\n   */\n  private useFallbackColors(): void {\n    this.sectionColors = CONSTANTS.DEFAULT_FALLBACK_COLORS.map((n) => normalizeColor(n));\n  }\n\n  /**\n   * Initialize gradient colors with fallback priority:\n   * 1. Colors from configuration (highest priority)\n   * 2. Colors from CSS variables\n   * 3. Random generated colors (fallback if neither above are available)\n   */\n  private initGradientColors() {\n    // If colors are provided in config, use them with priority\n    if (this.configColors) {\n      this.sectionColors = this.configColors\n        .map((hexValue) => parseHexColor(hexValue))\n        .filter((color): color is number => color !== null)\n        .map((colorValue) => normalizeColor(colorValue));\n\n      return;\n    }\n\n    // Fallback to CSS variables\n    const cssVars = CONSTANTS.CSS_GRADIENT_VARS;\n\n    this.sectionColors = cssVars\n      .map((cssPropertyName) => {\n        const hexValue = this.computedCanvasStyle ? this.computedCanvasStyle.getPropertyValue(cssPropertyName) : '';\n\n        return parseHexColor(hexValue);\n      })\n      .filter((color): color is number => color !== null)\n      .map((colorValue) => normalizeColor(colorValue));\n\n    // Final fallback to random colors if no colors were found\n    if (!this.sectionColors || this.sectionColors.length === 0) {\n      const randomColors = genRandomColors();\n\n      this.sectionColors = randomColors\n        .map((hexValue) => parseHexColor(hexValue))\n        .filter((color): color is number => color !== null)\n        .map((colorValue) => normalizeColor(colorValue));\n    }\n  }\n}\n"]}